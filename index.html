<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mandaty i Wnioski do Sądu - Warmia RP</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f4f6f8;
      margin: 0; padding: 20px;
      color: #222;
    }
    h1 {
      text-align: center;
      margin-bottom: 15px;
      color: #2c3e50;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 20px;
      gap: 10px;
    }
    .tab-btn {
      padding: 10px 25px;
      background: #3498db;
      color: white;
      border: none;
      border-radius: 5px 5px 0 0;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    .tab-btn.active {
      background: #1d6fa5;
    }
    .tab {
      background: white;
      max-width: 600px;
      margin: 0 auto;
      border-radius: 0 5px 5px 5px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
      padding: 20px;
      display: none;
    }
    .tab.active {
      display: block;
    }
    label {
      display: block;
      margin: 15px 0 5px 0;
      font-weight: 600;
    }
    input[type="text"],
    input[type="number"],
    input[type="date"],
    input[type="time"],
    select,
    textarea {
      width: 100%;
      padding: 8px 10px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 14px;
      box-sizing: border-box;
    }
    textarea {
      resize: vertical;
      min-height: 60px;
    }
    button[type="submit"] {
      margin-top: 20px;
      background-color: #27ae60;
      border: none;
      color: white;
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: 700;
      width: 100%;
      transition: background-color 0.3s;
    }
    button[type="submit"]:hover {
      background-color: #1e8449;
    }
    .status {
      margin-top: 12px;
      font-weight: 700;
    }
    .separator {
      margin: 25px 0;
      border-top: 1px solid #ddd;
    }
  </style>
</head>
<body>

  <h1>Mandaty i Wnioski do Sądu - Warmia RP</h1>

  <div class="tabs">
    <button class="tab-btn active" onclick="showTab('mandat')">Wypisz mandat</button>
    <button class="tab-btn" onclick="showTab('wniosek')">Wniosek do sądu</button>
  </div>

  <div id="mandat" class="tab active">
    <form id="mandatForm">
      <label for="imie">Imię i nazwisko osoby ukaranej</label>
      <input type="text" id="imie" required placeholder="Np. Tomasz Malinowski" />

      <label for="nick">Nick (OOC)</label>
      <input type="text" id="nick" required placeholder="Np. Malina#1122" />

      <label for="dataWystawienia">Data wystawienia mandatu</label>
      <input type="date" id="dataWystawienia" required />

      <label for="godzinaZdarzenia">Godzina zdarzenia</label>
      <input type="time" id="godzinaZdarzenia" required />

      <label for="miejsce">Miejsce zdarzenia</label>
      <input type="text" id="miejsce" required placeholder="Np. Olsztyn, ul. Warszawska" />

      <label for="przyczyna">Przyczyna nałożenia mandatu</label>
      <select id="przyczyna" required onchange="toggleInnePole()">
        <option value="" disabled selected>Wybierz przyczynę</option>
        <option value="Przekroczenie prędkości">Przekroczenie prędkości</option>
        <option value="Nieprawidłowe parkowanie">Nieprawidłowe parkowanie</option>
        <option value="Jazda pod wpływem alkoholu">Jazda pod wpływem alkoholu</option>
        <option value="Nieustąpienie pierwszeństwa">Nieustąpienie pierwszeństwa</option>
        <option value="inne">Inne wykroczenie drogowe</option>
      </select>

      <div id="innePrzyczynaDiv" style="display:none; margin-top:10px;">
        <label for="innePrzyczyna">Opisz inną przyczynę</label>
        <textarea id="innePrzyczyna" placeholder="Wpisz dokładny opis przyczyny..."></textarea>
      </div>

      <label for="kwota">Kwota mandatu (PLN)</label>
      <input type="number" id="kwota" required min="1" step="1" placeholder="Np. 5000" />

      <label for="punkty">Punkty karne</label>
      <input type="number" id="punkty" required min="0" step="1" placeholder="Np. 10" />

      <label for="pojazd">Typ pojazdu</label>
      <input type="text" id="pojazd" required placeholder="Np. Mini van" />

      <label for="uzytkownik">Użytkownik pojazdu</label>
      <input type="text" id="uzytkownik" required placeholder="Np. firma pocztowa" />

      <label for="funkcjonariusz">Funkcjonariusz wystawiający mandat (imię, stopień)</label>
      <input type="text" id="funkcjonariusz" required placeholder="Np. Sierżant sztabowy Marek Nowak" />

      <button type="submit">Wyślij mandat</button>
      <div id="statusMandat" class="status"></div>
    </form>
  </div>

  <div id="wniosek" class="tab">
    <form id="wniosekForm">
      <label for="ukarany">Imię i nazwisko osoby ukaranej</label>
      <input type="text" id="ukarany" required placeholder="Np. Tomasz Malinowski" />

      <label for="nickWniosek">Nick (OOC)</label>
      <input type="text" id="nickWniosek" placeholder="Np. Malina#1122" />

      <label for="dataMandatu">Data wystawienia mandatu</label>
      <input type="date" id="dataMandatu" />

      <label for="typMandatu">Typ mandatu / wykroczenia</label>
      <input type="text" id="typMandatu" placeholder="Np. Przekroczenie prędkości" />

      <label for="kwotaMandatu">Kwota mandatu (PLN)</label>
      <input type="number" id="kwotaMandatu" min="0" step="1" placeholder="Np. 5000" />

      <label for="powod">Opis sprawy / powód złożenia wniosku</label>
      <textarea id="powod" required placeholder="Np. Nie zgadzam się z wysokością mandatu" ></textarea>

      <button type="submit">Wyślij wniosek do sądu</button>
      <div id="statusWniosek" class="status"></div>
    </form>
  </div>

  <script>
    // WEBHOOKI - Twoje linki:
    const webhookMandat = "https://discord.com/api/webhooks/1403683432227410001/aSOQ2awWpU5bBgGsgo1E0k_kkBIGU6bwOUEBsuSXgaVc-vp3-cmAlIWk5wHSkkdLheNg";
    const webhookSadDecyzja = "https://discord.com/api/webhooks/1403681144029057074/qWog2W1UxsgQp1P_IzmI0sqjmXtC7ZD4Fw3XsGhLX39AFaW31cyTC1Y0bNh6AfeqXy8c";
    const webhookWniosekSad = "https://discord.com/api/webhooks/1403683863867166820/JQcyZ777-KCpdze6TrnbkHyz5vpFrqD7H1QnFAmnOoXiW_Cq_nLdmKODlzioiI-YHePO";

    const tabs = document.querySelectorAll('.tab');
    const tabBtns = document.querySelectorAll('.tab-btn');
    function showTab(id) {
      tabs.forEach(t => t.classList.remove('active'));
      tabBtns.forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      event.currentTarget.classList.add('active');
    }

    function toggleInnePole() {
      const przyczyna = document.getElementById('przyczyna').value;
      document.getElementById('innePrzyczynaDiv').style.display = przyczyna === 'inne' ? 'block' : 'none';
    }

    async function wyslijWebhook(url, embed) {
      const body = JSON.stringify({ embeds: [embed] });
      const response = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: body
      });
      if (!response.ok) {
        throw new Error(`Błąd sieci: ${response.status} ${response.statusText}`);
      }
    }

    document.getElementById('mandatForm').addEventListener('submit', async e => {
      e.preventDefault();
      const status = document.getElementById('statusMandat');
      status.style.color = 'black';
      status.textContent = 'Wysyłam mandat...';

      try {
        const imie = document.getElementById('imie').value.trim();
        const nick = document.getElementById('nick').value.trim();
        const dataWystawieniaRaw = document.getElementById('dataWystawienia').value;
        const godzinaZdarzeniaRaw = document.getElementById('godzinaZdarzenia').value;
        const miejsce = document.getElementById('miejsce').value.trim();
        let przyczyna = document.getElementById('przyczyna').value;
        if (przyczyna === 'inne') {
          const inneText = document.getElementById('innePrzyczyna').value.trim();
          if (!inneText) {
            status.style.color = 'red';
            status.textContent = 'Proszę wpisać opis innej przyczyny.';
            return;
          }
          przyczyna = inneText;
        }
        const kwota = Number(document.getElementById('kwota').value);
        const punkty = Number(document.getElementById('punkty').value);
        const pojazd = document.getElementById('pojazd').value.trim();
        const uzytkownik = document.getElementById('uzytkownik').value.trim();
        const funkcjonariusz = document.getElementById('funkcjonariusz').value.trim();

        const dataObj = new Date(dataWystawieniaRaw);
        const dataStr = dataObj.toLocaleDateString('pl-PL') + ', godz. ' + dataObj.toLocaleTimeString('pl-PL', { hour: '2-digit', minute: '2-digit' });
        const godzinaZdarzenia = godzinaZdarzeniaRaw;

        const embed = {
          title: ":money_with_wings: MANDAT KARNY",
          description: "**Komenda Wojewódzka Policji w Olsztynie – Warmia RP**",
          color: 0xdc143c,
          fields: [
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Dane osoby ukaranej', value: `> Imię i nazwisko: **${imie}**\n> Nick (OOC): ${nick}`, inline: false },
            { name: 'Data i godzina wystawienia:', value: dataStr, inline: true },
            { name: 'Godzina zdarzenia:', value: godzinaZdarzenia, inline: true },
            { name: 'Miejsce zdarzenia:', value: miejsce, inline: false },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Przyczyna nałożenia mandatu', value: przyczyna, inline: false },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Wymiar kary', value: `Kwota mandatu: **${kwota.toLocaleString()} PLN**\nPunkty karne: **${punkty} pkt**`, inline: false },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Dane pojazdu', value: `Typ: ${pojazd}\nUżytkownik: ${uzytkownik}`, inline: false },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Funkcjonariusz wystawiający mandat', value: funkcjonariusz, inline: false },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: ':warning: Mandat należy uiścić w terminie 7 dni od daty wystawienia. Brak zapłaty skutkuje wszczęciem postępowania.', value: '\u200b', inline: false }
          ],
          timestamp: new Date().toISOString(),
          footer: {
            text: "Komenda Wojewódzka Policji - Warmia RP"
          }
        };

        await wyslijWebhook(webhookMandat, embed);
        status.style.color = 'green';
        status.textContent = 'Mandat został wysłany pomyślnie!';
        e.target.reset();
        document.getElementById('innePrzyczynaDiv').style.display = 'none';
      } catch (error) {
        status.style.color = 'red';
        status.textContent = 'Błąd podczas wysyłania: ' + error.message;
      }
    });

    document.getElementById('wniosekForm').addEventListener('submit', async e => {
      e.preventDefault();
      const status = document.getElementById('statusWniosek');
      status.style.color = 'black';
      status.textContent = 'Wysyłam wniosek do sądu...';

      try {
        const ukarany = document.getElementById('ukarany').value.trim();
        const nickWniosek = document.getElementById('nickWniosek').value.trim();
        const dataMandatuRaw = document.getElementById('dataMandatu').value;
        const typMandatu = document.getElementById('typMandatu').value.trim();
        const kwotaMandatu = document.getElementById('kwotaMandatu').value;
        const powod = document.getElementById('powod').value.trim();

        const dataMandatu = dataMandatuRaw ? new Date(dataMandatuRaw).toLocaleDateString('pl-PL') : "Brak danych";

        const embedWniosek = {
          title: ":scroll: Wniosek o ukaranie do sądu",
          description: "**Komenda Wojewódzka Policji w Olsztynie – Warmia RP**",
          color: 0x3498db,
          fields: [
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Dane osoby ukaranej', value: `> Imię i nazwisko: **${ukarany}**\n> Nick (OOC): ${nickWniosek || 'Brak'}`, inline: false },
            { name: 'Data mandatu', value: dataMandatu, inline: true },
            { name: 'Typ mandatu / wykroczenia', value: typMandatu || 'Brak', inline: true },
            { name: 'Kwota mandatu', value: kwotaMandatu ? `${Number(kwotaMandatu).toLocaleString()} PLN` : 'Brak', inline: true },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Powód złożenia wniosku', value: powod, inline: false },
            { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
            { name: 'Decyzja sądu zostanie opublikowana na kanale <#1398630915663466562>', value: '\u200b', inline: false }
          ],
          timestamp: new Date().toISOString(),
          footer: {
            text: "Komenda Wojewódzka Policji - Warmia RP"
          }
        };

        await wyslijWebhook(webhookWniosekSad, embedWniosek);
        status.style.color = 'green';
        status.textContent = 'Wniosek został wysłany! Oczekiwanie na decyzję sądu...';

        // Symulacja decyzji sądu po 2 sekundach
        setTimeout(async () => {
          const decyzja = losujDecyzje();
          const embedDecyzja = {
            title: ":judge: Decyzja sądu",
            description: `Sąd rozpatrzył wniosek o ukaranie osoby **${ukarany}**.`,
            color: decyzja.color,
            fields: [
              { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
              { name: 'Decyzja:', value: decyzja.text, inline: false },
              { name: 'Szczegóły:', value: decyzja.details, inline: false },
              { name: '━━━━━━━━━━━━━━━━━━━━━━━━━━', value: '\u200b', inline: false },
              { name: 'Mandat:', value: kwotaMandatu ? `${Number(kwotaMandatu).toLocaleString()} PLN` : 'Brak danych', inline: true },
              { name: 'Typ mandatu:', value: typMandatu || 'Brak danych', inline: true },
              { name: 'Data mandatu:', value: dataMandatu, inline: true },
              { name: 'Kanał z decyzją sądu:', value: '<#1398630915663466562>', inline: false }
            ],
            timestamp: new Date().toISOString(),
            footer: {
              text: "Komenda Wojewódzka Policji - Warmia RP"
            }
          };
          try {
            await wyslijWebhook(webhookSadDecyzja, embedDecyzja);
          } catch(err) {
            console.error('Błąd wysyłania decyzji sądu:', err);
          }
        }, 2000);

      } catch (error) {
        status.style.color = 'red';
        status.textContent = 'Błąd podczas wysyłania wniosku: ' + error.message;
      }
    });

    function losujDecyzje() {
      // Losowanie procentowe decyzji:
      // Grzywna: 70%
      // Areszt: 25%
      // Uniewinnienie: 5%
      const los = Math.random();
      if (los < 0.7) {
        return {
          text: "Skazano na grzywnę.",
          details: "Wymierzono karę grzywny w wysokości określonej w mandacie.",
          color: 0x27ae60 // zieleń
        };
      } else if (los < 0.95) {
        return {
          text: "Skazano na areszt.",
          details: "Wymierzono karę aresztu - zatrzymanie na określony czas.",
          color: 0xe67e22 // pomarańczowy
        };
      } else {
        return {
          text: "Uniewinniono oskarżonego.",
          details: "Sąd uznał wniosek za bezzasadny i uniewinnił oskarżonego.",
          color: 0x2980b9 // niebieski
        };
      }
    }
  </script>

</body>
</html>
